var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c="function"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error("Cannot find module '"+i+"'");throw a.code="MODULE_NOT_FOUND",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u="function"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()({1:[function(require,module,exports){
"use strict";

Object.defineProperty(exports, "__esModule", {
				value: true
});

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }(); /**This class is automatically generated by LayaAirIDE, please do not make any modifications. */


var _GameView = require("./script/GameView");

var _GameView2 = _interopRequireDefault(_GameView);

var _Director = require("./script/Director");

var _Director2 = _interopRequireDefault(_Director);

var _StartGame = require("./script/StartGame");

var _StartGame2 = _interopRequireDefault(_StartGame);

var _Brids = require("./script/Brids");

var _Brids2 = _interopRequireDefault(_Brids);

var _Pencel = require("./script/Pencel");

var _Pencel2 = _interopRequireDefault(_Pencel);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

var GameConfig = function () {
				function GameConfig() {
								_classCallCheck(this, GameConfig);
				}

				_createClass(GameConfig, null, [{
								key: "init",
								value: function init() {
												//注册Script或者Runtime引用
												var reg = Laya.ClassUtils.regClass;
												reg("script/GameView.js", _GameView2.default);
												reg("script/Director.js", _Director2.default);
												reg("script/StartGame.js", _StartGame2.default);
												reg("script/Brids.js", _Brids2.default);
												reg("script/Pencel.js", _Pencel2.default);
								}
				}]);

				return GameConfig;
}();

exports.default = GameConfig;

GameConfig.width = 750;
GameConfig.height = 1334;
GameConfig.scaleMode = "fixedwidth";
GameConfig.screenMode = "none";
GameConfig.alignV = "top";
GameConfig.alignH = "left";
GameConfig.startScene = "StartGame.scene";
GameConfig.sceneRoot = "";
GameConfig.debug = false;
GameConfig.stat = false;
GameConfig.physicsDebug = false;
GameConfig.exportSceneToJson = true;

GameConfig.init();

},{"./script/Brids":3,"./script/Director":4,"./script/GameView":5,"./script/Pencel":6,"./script/StartGame":7}],2:[function(require,module,exports){
"use strict";

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _GameConfig = require("./GameConfig");

var _GameConfig2 = _interopRequireDefault(_GameConfig);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

var Main = function () {
	function Main() {
		_classCallCheck(this, Main);

		//根据IDE设置初始化引擎		
		if (window["Laya3D"]) Laya3D.init(_GameConfig2.default.width, _GameConfig2.default.height);else Laya.init(_GameConfig2.default.width, _GameConfig2.default.height, Laya["WebGL"]);
		Laya["Physics"] && Laya["Physics"].enable();
		Laya["DebugPanel"] && Laya["DebugPanel"].enable();
		Laya.stage.scaleMode = _GameConfig2.default.scaleMode;
		Laya.stage.screenMode = _GameConfig2.default.screenMode;
		Laya.stage.alignV = _GameConfig2.default.alignV;
		Laya.stage.alignH = _GameConfig2.default.alignH;
		//兼容微信不支持加载scene后缀场景
		Laya.URL.exportSceneToJson = _GameConfig2.default.exportSceneToJson;

		//打开调试面板（通过IDE设置调试模式，或者url地址增加debug=true参数，均可打开调试面板）
		if (_GameConfig2.default.debug || Laya.Utils.getQueryString("debug") == "true") Laya.enableDebugPanel();
		if (_GameConfig2.default.physicsDebug && Laya["PhysicsDebugDraw"]) Laya["PhysicsDebugDraw"].enable();
		if (_GameConfig2.default.stat) Laya.Stat.show();
		Laya.alertGlobalError = true;

		//激活资源版本控制，version.json由IDE发布功能自动生成，如果没有也不影响后续流程
		Laya.ResourceVersion.enable("version.json", Laya.Handler.create(this, this.onVersionLoaded), Laya.ResourceVersion.FILENAME_VERSION);
	}

	_createClass(Main, [{
		key: "onVersionLoaded",
		value: function onVersionLoaded() {
			//激活大小图映射，加载小图的时候，如果发现小图在大图合集里面，则优先加载大图合集，而不是小图
			Laya.AtlasInfoManager.enable("fileconfig.json", Laya.Handler.create(this, this.onConfigLoaded));
		}
	}, {
		key: "onConfigLoaded",
		value: function onConfigLoaded() {
			//加载IDE指定的场景
			_GameConfig2.default.startScene && Laya.Scene.open(_GameConfig2.default.startScene);
		}
	}]);

	return Main;
}();
//激活启动类


new Main();

},{"./GameConfig":1}],3:[function(require,module,exports){
'use strict';

Object.defineProperty(exports, "__esModule", {
    value: true
});

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _GameView = require('./GameView');

var _GameView2 = _interopRequireDefault(_GameView);

var _Director = require('./Director');

var _Director2 = _interopRequireDefault(_Director);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var Brids = function (_Laya$Script) {
    _inherits(Brids, _Laya$Script);

    function Brids() {
        _classCallCheck(this, Brids);

        var _this = _possibleConstructorReturn(this, (Brids.__proto__ || Object.getPrototypeOf(Brids)).call(this));

        Brids.instance = _this;
        return _this;
    }

    _createClass(Brids, [{
        key: 'onEnable',
        value: function onEnable() {
            //设置初始速度
            this.rig = this.owner.getComponent(Laya.RigidBody);
            this.rig.setVelocity({ x: 0, y: -5 });
        }
    }, {
        key: 'onTriggerEnter',
        value: function onTriggerEnter(other, self, contact) {
            _Director2.default.instance.stopGame();
            // this.owner.removeSelf()
        }
    }]);

    return Brids;
}(Laya.Script);

exports.default = Brids;

},{"./Director":4,"./GameView":5}],4:[function(require,module,exports){
'use strict';

Object.defineProperty(exports, "__esModule", {
    value: true
});

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _GameView = require('./GameView');

var _GameView2 = _interopRequireDefault(_GameView);

var _Brids = require('./Brids');

var _Brids2 = _interopRequireDefault(_Brids);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var Director = function (_Laya$Script) {
    _inherits(Director, _Laya$Script);

    /** @prop {name: PencelUp, tip: '上铅笔', type: prefab} */
    /** @prop {name: PencelDwon, tip: '下铅笔', type: prefab} */
    /** @prop {name: Brids, tip: '小鸟', type: prefab} */
    function Director() {
        _classCallCheck(this, Director);

        var _this = _possibleConstructorReturn(this, (Director.__proto__ || Object.getPrototypeOf(Director)).call(this));

        Director.instance = _this;
        return _this;
    }

    _createClass(Director, [{
        key: 'onEnable',
        value: function onEnable() {
            this.isGameOver = false; // 游戏是否结束
            this.count = 1;
            this.scoreCount = 0;
            this.Brid = null;
            this.PencelsData = [];
            this.isAddScore = true;
            this.score = 0;

            var _wx$getStorageSync = wx.getStorageSync('userInfo'),
                avatarUrl = _wx$getStorageSync.avatarUrl,
                nickName = _wx$getStorageSync.nickName;

            this.owner.userhead.skin = avatarUrl;
            this.owner.username.text = nickName;

            var dataSource = [];
            for (var i = 0; i < 20; i++) {
                dataSource.push({
                    username: '' + i,
                    score: 100
                });
            }
            this.owner.rank_list.dataSource = dataSource;
            this.gameBox = this.owner.getChildByName('gameBox');
            this.createPencel();
            this.createBrids();

            this.owner.startGameBtn.on(Laya.Event.CLICK, this, this.startGame);

            this.openDataContext = wx.getOpenDataContext();
        }
    }, {
        key: 'startGame',
        value: function startGame() {
            Laya.Scene.open('GameView.scene');
        }
    }, {
        key: 'stopGame',
        value: function stopGame() {
            this.openDataContext.postMessage({ type: 'friends', year: new Date().getFullYear() });

            this.isGameOver = true;
            this.owner.gameover.visible = true;

            Laya.timer.once(1000, this, function () {
                var sprite = new Laya.Sprite();
                sprite.zOrder = 1008;
                sprite.pos(0, 0);
                var texture = new Laya.Texture(window['sharedCanvas']);
                texture.bitmap.alwaysChange = true; //小程序使用，非常费
                sprite.graphics.drawTexture(texture, 0, 0, texture.width, texture.height);
                Laya.stage.addChild(sprite);
            });
        }
    }, {
        key: 'onUpdate',
        value: function onUpdate() {
            if (this.isGameOver) {
                return;
            }
            _GameView2.default.instance.move();
            for (var i = 0; i < this.PencelsData.length; i++) {
                var pencel = this.PencelsData[i];
                if (this.Brid.x > pencel.x + pencel.width) {
                    if (this.isAddScore) {
                        this.isAddScore = false;
                        this.score++;
                        _GameView2.default.instance.setScore(this.score);
                    }
                }
            }
        }
    }, {
        key: 'onStageClick',
        value: function onStageClick() {
            if (this.Brid && !this.isGameOver) {
                _Brids2.default.instance.rig.setVelocity({ x: 0, y: -7 });
            }
        }

        // 

    }, {
        key: 'addScore',
        value: function addScore() {
            this.scoreCount++;
            if (this.scoreCount === 2) {
                this.PencelsData.shift();
                this.scoreCount = 0;
                this.isAddScore = true;
            }
        }
    }, {
        key: 'createPencel',
        value: function createPencel() {
            this.count++;
            if (this.count === 2) {
                var min = Laya.stage.height / 8;
                var max = Laya.stage.height / 2;
                var top = min + Math.random() * (max - min);

                var PencelUp = Laya.Pool.getItemByCreateFun('PencelUp', this.PencelUp.create, this.PencelUp);
                PencelUp.pos(Laya.stage.width, top - PencelUp.height);
                this.gameBox.addChild(PencelUp);

                var PencelDwon = Laya.Pool.getItemByCreateFun('PencelDwon', this.PencelDwon.create, this.PencelDwon);
                PencelDwon.pos(Laya.stage.width, top + Laya.stage.height / 5);
                this.gameBox.addChild(PencelDwon);

                this.PencelsData.push(PencelUp);

                this.count = 0;
            }
        }
    }, {
        key: 'createBrids',
        value: function createBrids() {
            this.Brid = Laya.Pool.getItemByCreateFun('Brids', this.Brids.create, this.Brids);
            this.Brid.pos(50, Laya.stage.height / 2);
            this.gameBox.addChild(this.Brid);
        }
    }]);

    return Director;
}(Laya.Script);

exports.default = Director;

},{"./Brids":3,"./GameView":5}],5:[function(require,module,exports){
"use strict";

Object.defineProperty(exports, "__esModule", {
    value: true
});

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var GameView = function (_Laya$Scene) {
    _inherits(GameView, _Laya$Scene);

    function GameView() {
        _classCallCheck(this, GameView);

        var _this = _possibleConstructorReturn(this, (GameView.__proto__ || Object.getPrototypeOf(GameView)).call(this));

        GameView.instance = _this;
        return _this;
    }

    _createClass(GameView, [{
        key: "onEnable",
        value: function onEnable() {
            this.speed = 4;
        }
    }, {
        key: "setScore",
        value: function setScore() {
            var num = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;

            this.score.text = num;
        }
    }, {
        key: "move",
        value: function move() {
            if (-this.background.x >= 1674) {
                this.background.x = 0;
            }
            this.background.x -= this.speed;
        }
    }]);

    return GameView;
}(Laya.Scene);

exports.default = GameView;

},{}],6:[function(require,module,exports){
'use strict';

Object.defineProperty(exports, "__esModule", {
    value: true
});

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _Director = require('./Director');

var _Director2 = _interopRequireDefault(_Director);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var Pencel = function (_Laya$Script) {
    _inherits(Pencel, _Laya$Script);

    function Pencel() {
        _classCallCheck(this, Pencel);

        return _possibleConstructorReturn(this, (Pencel.__proto__ || Object.getPrototypeOf(Pencel)).call(this));
    }

    _createClass(Pencel, [{
        key: 'onEnable',
        value: function onEnable() {
            //设置初始速度
            this.rig = this.owner.getComponent(Laya.RigidBody);
            this.rig.setVelocity({ x: -4, y: 0 });
            this.isCreate = false;
        }
    }, {
        key: 'onUpdate',
        value: function onUpdate() {
            // 如果游戏结束停止运动
            if (_Director2.default.instance.isGameOver) {
                this.rig.setVelocity({ x: 0, y: 0 });
                return;
            }
            var owner = this.owner;
            if (owner.x <= -owner.width) {
                owner.removeSelf();
                _Director2.default.instance.addScore();
            }
            if (owner.x <= Math.floor(Laya.stage.width / 2)) {
                if (!this.isCreate) {
                    this.isCreate = true;
                    _Director2.default.instance.createPencel();
                }
            }
        }
    }]);

    return Pencel;
}(Laya.Script);

exports.default = Pencel;

},{"./Director":4}],7:[function(require,module,exports){
'use strict';

Object.defineProperty(exports, "__esModule", {
    value: true
});

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var GameStart = function (_Laya$Scene) {
    _inherits(GameStart, _Laya$Scene);

    function GameStart() {
        _classCallCheck(this, GameStart);

        var _this = _possibleConstructorReturn(this, (GameStart.__proto__ || Object.getPrototypeOf(GameStart)).call(this));

        GameStart.instance = _this;
        _this.loadScene('GameView.scene');
        return _this;
    }

    _createClass(GameStart, [{
        key: 'onEnable',
        value: function onEnable() {
            this.on(Laya.Event.CLICK, this, this.onPageClick);

            var button = wx.createUserInfoButton({
                type: 'text',
                text: '',
                style: {
                    left: 100,
                    top: 260,
                    width: 200,
                    height: 50,
                    backgroundColor: 'rgba(0,0,0,0)'
                }
            });
            button.onTap(function (userinfo) {
                if (wx.getStorageSync('userInfo')) {
                    Laya.Scene.open('GameView.scene');
                } else {
                    wx.login({
                        success: function success(res) {
                            if (res.code) {
                                // 发起网络请求
                                wx.request({
                                    url: 'http://wx.yinchunyu.com/xcx/login',
                                    method: 'POST',
                                    data: {
                                        code: res.code,
                                        jsonData: JSON.stringify(userinfo)
                                    },
                                    success: function success(data) {
                                        // 存储到本地
                                        wx.setStorageSync('userInfo', data.data.Result);
                                        Laya.Scene.open('GameView.scene');
                                    }
                                });
                            } else {
                                console.log('登录失败！' + res.errMsg);
                            }
                        }
                    });
                }
            });
        }
    }, {
        key: 'onPageClick',
        value: function onPageClick() {}
    }]);

    return GameStart;
}(Laya.Scene);

exports.default = GameStart;

},{}]},{},[2])
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uL+i9r+S7ti9MYXlhQWlySURFL3Jlc291cmNlcy9hcHAvbm9kZV9tb2R1bGVzL2Jyb3dzZXItcGFjay9fcHJlbHVkZS5qcyIsInNyYy9HYW1lQ29uZmlnLmpzIiwic3JjL01haW4uanMiLCJzcmMvc2NyaXB0L0JyaWRzLmpzIiwic3JjL3NjcmlwdC9EaXJlY3Rvci5qcyIsInNyYy9zY3JpcHQvR2FtZVZpZXcuanMiLCJzcmMvc2NyaXB0L1BlbmNlbC5qcyIsInNyYy9zY3JpcHQvU3RhcnRHYW1lLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7cWpCQ1ZBOzs7QUFDQTs7OztBQUNBOzs7O0FBQ0E7Ozs7QUFDQTs7OztBQUNBOzs7Ozs7OztJQUVxQixVOzs7Ozs7OytCQUNIO0FBQ1Y7QUFDQSxnQkFBSSxNQUFNLEtBQUssVUFBTCxDQUFnQixRQUExQjtBQUNOLGdCQUFJLG9CQUFKLEVBQXlCLGtCQUF6QjtBQUNBLGdCQUFJLG9CQUFKLEVBQXlCLGtCQUF6QjtBQUNBLGdCQUFJLHFCQUFKLEVBQTBCLG1CQUExQjtBQUNBLGdCQUFJLGlCQUFKLEVBQXNCLGVBQXRCO0FBQ0EsZ0JBQUksa0JBQUosRUFBdUIsZ0JBQXZCO0FBQ0c7Ozs7OztrQkFUZ0IsVTs7QUFXckIsV0FBVyxLQUFYLEdBQW1CLEdBQW5CO0FBQ0EsV0FBVyxNQUFYLEdBQW9CLElBQXBCO0FBQ0EsV0FBVyxTQUFYLEdBQXNCLFlBQXRCO0FBQ0EsV0FBVyxVQUFYLEdBQXdCLE1BQXhCO0FBQ0EsV0FBVyxNQUFYLEdBQW9CLEtBQXBCO0FBQ0EsV0FBVyxNQUFYLEdBQW9CLE1BQXBCO0FBQ0EsV0FBVyxVQUFYLEdBQXdCLGlCQUF4QjtBQUNBLFdBQVcsU0FBWCxHQUF1QixFQUF2QjtBQUNBLFdBQVcsS0FBWCxHQUFtQixLQUFuQjtBQUNBLFdBQVcsSUFBWCxHQUFrQixLQUFs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QWlCO0FBTGQ7QUFINEIsYUFBeEIsQ0FBZjtBQVdFLG1CQUFPLEtBQVAsQ0FBYSxVQUFDLFFBQUQsRUFBYztBQUN2QixvQkFBSSxHQUFHLGNBQUgsQ0FBa0IsVUFBbEIsQ0FBSixFQUFtQztBQUNqQyx5QkFBSyxLQUFMLENBQVcsSUFBWCxDQUFnQixnQkFBaEI7QUFDRCxpQkFGRCxNQUVPO0FBQ0wsdUJBQUcsS0FBSCxDQUFTO0FBQ0wsK0JBREssbUJBQ0csR0FESCxFQUNRO0FBQ1QsZ0NBQUksSUFBSSxJQUFSLEVBQWM7QUFDVjtBQUNBLG1DQUFHLE9BQUgsQ0FBVztBQUNQLHlDQUFLLG1DQURFO0FBRVAsNENBQVEsTUFGRDtBQUdQLDBDQUFNO0FBQ0YsOENBQU0sSUFBSSxJQURSO0FBRUYsa0RBQVUsS0FBSyxTQUFMLENBQWUsUUFBZjtBQUZSLHFDQUhDO0FBT1AsMkNBUE8sbUJBT0MsSUFQRCxFQU9NO0FBQ1Q7QUFDQSwyQ0FBRyxjQUFILENBQWtCLFVBQWxCLEVBQThCLEtBQUssSUFBTCxDQUFVLE1BQXhDO0FBQ0EsNkNBQUssS0FBTCxDQUFXLElBQVgsQ0FBZ0IsZ0JBQWhCO0FBQ0g7QUFYTSxpQ0FBWDtBQWFILDZCQWZELE1BZU87QUFDUCx3Q0FBUSxHQUFSLENBQVksVUFBVSxJQUFJLE1BQTFCO0FBQ0M7QUFDSjtBQXBCSSxxQkFBVDtBQXNCRDtBQUNKLGFBM0JEO0FBNkJMOzs7c0NBRWEsQ0FFYjs7OztFQXREa0MsS0FBSyxLOztrQkFBdkIsUyIsImZpbGUiOiJnZW5lcmF0ZWQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlc0NvbnRlbnQiOlsidmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkge1xyXG4gICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHxcclxuICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8XHJcbiAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07IH07XHJcbiAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHtcclxuICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpO1xyXG4gICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxyXG4gICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcclxuICAgIH07XHJcbn0pKCk7XHJcbihmdW5jdGlvbigpe2Z1bmN0aW9uIHIoZSxuLHQpe2Z1bmN0aW9uIG8oaSxmKXtpZighbltpXSl7aWYoIWVbaV0pe3ZhciBjPVwiZnVuY3Rpb25cIj09dHlwZW9mIHJlcXVpcmUmJnJlcXVpcmU7aWYoIWYmJmMpcmV0dXJuIGMoaSwhMCk7aWYodSlyZXR1cm4gdShpLCEwKTt2YXIgYT1uZXcgRXJyb3IoXCJDYW5ub3QgZmluZCBtb2R1bGUgJ1wiK2krXCInXCIpO3Rocm93IGEuY29kZT1cIk1PRFVMRV9OT1RfRk9VTkRcIixhfXZhciBwPW5baV09e2V4cG9ydHM6e319O2VbaV1bMF0uY2FsbChwLmV4cG9ydHMsZnVuY3Rpb24ocil7dmFyIG49ZVtpXVsxXVtyXTtyZXR1cm4gbyhufHxyKX0scCxwLmV4cG9ydHMscixlLG4sdCl9cmV0dXJuIG5baV0uZXhwb3J0c31mb3IodmFyIHU9XCJmdW5jdGlvblwiPT10eXBlb2YgcmVxdWlyZSYmcmVxdWlyZSxpPTA7aTx0Lmxlbmd0aDtpKyspbyh0W2ldKTtyZXR1cm4gb31yZXR1cm4gcn0pKCkiLCIvKipUaGlzIGNsYXNzIGlzIGF1dG9tYXRpY2FsbHkgZ2VuZXJhdGVkIGJ5IExheWFBaXJJREUsIHBsZWFzZSBkbyBub3QgbWFrZSBhbnkgbW9kaWZpY2F0aW9ucy4gKi9cclxuaW1wb3J0IEdhbWVWaWV3IGZyb20gXCIuL3NjcmlwdC9HYW1lVmlld1wiXG5pbXBvcnQgRGlyZWN0b3IgZnJvbSBcIi4vc2NyaXB0L0RpcmVjdG9yXCJcbmltcG9ydCBTdGFydEdhbWUgZnJvbSBcIi4vc2NyaXB0L1N0YXJ0R2FtZVwiXG5pbXBvcnQgQnJpZHMgZnJvbSBcIi4vc2NyaXB0L0JyaWRzXCJcbmltcG9ydCBQZW5jZWwgZnJvbSBcIi4vc2NyaXB0L1BlbmNlbFwiXHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBHYW1lQ29uZmlnIHtcclxuICAgIHN0YXRpYyBpbml0KCkge1xyXG4gICAgICAgIC8v5rOo5YaMU2NyaXB05oiW6ICFUnVudGltZeW8leeUqFxyXG4gICAgICAgIGxldCByZWcgPSBMYXlhLkNsYXNzVXRpbHMucmVnQ2xhc3M7XHJcblx0XHRyZWcoXCJzY3JpcHQvR2FtZVZpZXcuanNcIixHYW1lVmlldyk7XG5cdFx0cmVnKFwic2NyaXB0L0RpcmVjdG9yLmpzXCIsRGlyZWN0b3IpO1xuXHRcdHJlZyhcInNjcmlwdC9TdGFydEdhbWUuanNcIixTdGFydEdhbWUpO1xuXHRcdHJlZyhcInNjcmlwdC9Ccmlkcy5qc1wiLEJyaWRzKTtcblx0XHRyZWcoXCJzY3JpcHQvUGVuY2VsLmpzXCIsUGVuY2VsKTtcclxuICAgIH1cclxufVxyXG5HYW1lQ29uZmlnLndpZHRoID0gNzUwO1xyXG5HYW1lQ29uZmlnLmhlaWdodCA9IDEzMzQ7XHJcbkdhbWVDb25maWcuc2NhbGVNb2RlID1cImZpeGVkd2lkdGhcIjtcclxuR2FtZUNvbmZpZy5zY3JlZW5Nb2RlID0gXCJub25lXCI7XHJcbkdhbWVDb25maWcuYWxpZ25WID0gXCJ0b3BcIjtcclxuR2FtZUNvbmZpZy5hbGlnbkggPSBcImxlZnRcIjtcclxuR2FtZUNvbmZpZy5zdGFydFNjZW5lID0gXCJTdGFydEdhbWUuc2NlbmVcIjtcclxuR2FtZUNvbmZpZy5zY2VuZVJvb3QgPSBcIlwiO1xyXG5HYW1lQ29uZmlnLmRlYnVnID0gZmFsc2U7XHJcbkdhbWVDb25maWcuc3RhdCA9IGZhbHNlO1xyXG5HYW1lQ29uZmlnLnBoeXNpY3NEZWJ1ZyA9IGZhbHNlO1xyXG5HYW1lQ29uZmlnLmV4cG9ydFNjZW5lVG9Kc29uID0gdHJ1ZTtcclxuXHJcbkdhbWVDb25maWcuaW5pdCgpO1xyXG4iLCJpbXBvcnQgR2FtZUNvbmZpZyBmcm9tIFwiLi9HYW1lQ29uZmlnXCI7XHJcbmNsYXNzIE1haW4ge1xyXG5cdGNvbnN0cnVjdG9yKCkge1xyXG5cdFx0Ly/moLnmja5JREXorr7nva7liJ3lp4vljJblvJXmk45cdFx0XHJcblx0XHRpZiAod2luZG93W1wiTGF5YTNEXCJdKSBMYXlhM0QuaW5pdChHYW1lQ29uZmlnLndpZHRoLCBHYW1lQ29uZmlnLmhlaWdodCk7XHJcblx0XHRlbHNlIExheWEuaW5pdChHYW1lQ29uZmlnLndpZHRoLCBHYW1lQ29uZmlnLmhlaWdodCwgTGF5YVtcIldlYkdMXCJdKTtcclxuXHRcdExheWFbXCJQaHlzaWNzXCJdICYmIExheWFbXCJQaHlzaWNzXCJdLmVuYWJsZSgpO1xyXG5cdFx0TGF5YVtcIkRlYnVnUGFuZWxcIl0gJiYgTGF5YVtcIkRlYnVnUGFuZWxcIl0uZW5hYmxlKCk7XHJcblx0XHRMYXlhLnN0YWdlLnNjYWxlTW9kZSA9IEdhbWVDb25maWcuc2NhbGVNb2RlO1xyXG5cdFx0TGF5YS5zdGFnZS5zY3JlZW5Nb2RlID0gR2FtZUNvbmZpZy5zY3JlZW5Nb2RlO1xyXG5cdFx0TGF5YS5zdGFnZS5hbGlnblYgPSBHYW1lQ29uZmlnLmFsaWduVjtcclxuXHRcdExheWEuc3RhZ2UuYWxpZ25IID0gR2FtZUNvbmZpZy5hbGlnbkg7XHJcblx0XHQvL+WFvOWuueW+ruS/oeS4jeaUr+aMgeWKoOi9vXNjZW5l5ZCO57yA5Zy65pmvXHJcblx0XHRMYXlhLlVSTC5leHBvcnRTY2VuZVRvSnNvbiA9IEdhbWVDb25maWcuZXhwb3J0U2NlbmVUb0pzb247XHJcblxyXG5cdFx0Ly/miZPlvIDosIPor5XpnaLmnb/vvIjpgJrov4dJREXorr7nva7osIPor5XmqKHlvI/vvIzmiJbogIV1cmzlnLDlnYDlop7liqBkZWJ1Zz10cnVl5Y+C5pWw77yM5Z2H5Y+v5omT5byA6LCD6K+V6Z2i5p2/77yJXHJcblx0XHRpZiAoR2FtZUNvbmZpZy5kZWJ1ZyB8fCBMYXlhLlV0aWxzLmdldFF1ZXJ5U3RyaW5nKFwiZGVidWdcIikgPT0gXCJ0cnVlXCIpIExheWEuZW5hYmxlRGVidWdQYW5lbCgpO1xyXG5cdFx0aWYgKEdhbWVDb25maWcucGh5c2ljc0RlYnVnICYmIExheWFbXCJQaHlzaWNzRGVidWdEcmF3XCJdKSBMYXlhW1wiUGh5c2ljc0RlYnVnRHJhd1wiXS5lbmFibGUoKTtcclxuXHRcdGlmIChHYW1lQ29uZmlnLnN0YXQpIExheWEuU3RhdC5zaG93KCk7XHJcblx0XHRMYXlhLmFsZXJ0R2xvYmFsRXJyb3IgPSB0cnVlO1xyXG5cclxuXHRcdC8v5r+A5rS76LWE5rqQ54mI5pys5o6n5Yi277yMdmVyc2lvbi5qc29u55SxSURF5Y+R5biD5Yqf6IO96Ieq5Yqo55Sf5oiQ77yM5aaC5p6c5rKh5pyJ5Lmf5LiN5b2x5ZON5ZCO57ut5rWB56iLXHJcblx0XHRMYXlhLlJlc291cmNlVmVyc2lvbi5lbmFibGUoXCJ2ZXJzaW9uLmpzb25cIiwgTGF5YS5IYW5kbGVyLmNyZWF0ZSh0aGlzLCB0aGlzLm9uVmVyc2lvbkxvYWRlZCksIExheWEuUmVzb3VyY2VWZXJzaW9uLkZJTEVOQU1FX1ZFUlNJT04pO1xyXG5cclxuXHR9XHJcblxyXG5cdG9uVmVyc2lvbkxvYWRlZCgpIHtcclxuXHRcdC8v5r+A5rS75aSn5bCP5Zu+5pig5bCE77yM5Yqg6L295bCP5Zu+55qE5pe25YCZ77yM5aaC5p6c5Y+R546w5bCP5Zu+5Zyo5aSn5Zu+5ZCI6ZuG6YeM6Z2i77yM5YiZ5LyY5YWI5Yqg6L295aSn5Zu+5ZCI6ZuG77yM6ICM5LiN5piv5bCP5Zu+XHJcblx0XHRMYXlhLkF0bGFzSW5mb01hbmFnZXIuZW5hYmxlKFwiZmlsZWNvbmZpZy5qc29uXCIsIExheWEuSGFuZGxlci5jcmVhdGUodGhpcywgdGhpcy5vbkNvbmZpZ0xvYWRlZCkpO1xyXG5cdH1cclxuXHJcblx0b25Db25maWdMb2FkZWQoKSB7XHJcblx0XHQvL+WKoOi9vUlEReaMh+WumueahOWcuuaZr1xyXG5cdFx0R2FtZUNvbmZpZy5zdGFydFNjZW5lICYmIExheWEuU2NlbmUub3BlbihHYW1lQ29uZmlnLnN0YXJ0U2NlbmUpO1xyXG5cdH1cclxufVxyXG4vL+a/gOa0u+WQr+WKqOexu1xyXG5uZXcgTWFpbigpO1xyXG4iLCJpbXBvcnQgR2FtZVZpZXcgZnJvbSAnLi9HYW1lVmlldydcclxuaW1wb3J0IERpcmVjdG9yIGZyb20gJy4vRGlyZWN0b3InXHJcbiAgICBcclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgQnJpZHMgZXh0ZW5kcyBMYXlhLlNjcmlwdHtcclxuICAgIGNvbnN0cnVjdG9yKCkge1xyXG4gICAgICAgIHN1cGVyKClcclxuICAgICAgICBCcmlkcy5pbnN0YW5jZSA9IHRoaXNcclxuICAgIH1cclxuXHJcbiAgICBvbkVuYWJsZSgpIHtcclxuICAgICAgICAvL+iuvue9ruWIneWni+mAn+W6plxyXG4gICAgICAgIHRoaXMucmlnID0gdGhpcy5vd25lci5nZXRDb21wb25lbnQoTGF5YS5SaWdpZEJvZHkpO1xyXG4gICAgICAgIHRoaXMucmlnLnNldFZlbG9jaXR5KHsgeDogMCwgeTogLTUgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgb25UcmlnZ2VyRW50ZXIob3RoZXIsIHNlbGYsIGNvbnRhY3QpIHtcclxuICAgICAgICBEaXJlY3Rvci5pbnN0YW5jZS5zdG9wR2FtZSgpXHJcbiAgICAgICAgLy8gdGhpcy5vd25lci5yZW1vdmVTZWxmKClcclxuICAgIH1cclxuXHJcbn0iLCJpbXBvcnQgR2FtZVZpZXcgZnJvbSAnLi9HYW1lVmlldydcclxuaW1wb3J0IEJyaWRzIGZyb20gJy4vQnJpZHMnXHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBEaXJlY3RvciBleHRlbmRzIExheWEuU2NyaXB0e1xyXG4gICAgLyoqIEBwcm9wIHtuYW1lOiBQZW5jZWxVcCwgdGlwOiAn5LiK6ZOF56yUJywgdHlwZTogcHJlZmFifSAqL1xyXG4gICAgLyoqIEBwcm9wIHtuYW1lOiBQZW5jZWxEd29uLCB0aXA6ICfkuIvpk4XnrJQnLCB0eXBlOiBwcmVmYWJ9ICovXHJcbiAgICAvKiogQHByb3Age25hbWU6IEJyaWRzLCB0aXA6ICflsI/puJ8nLCB0eXBlOiBwcmVmYWJ9ICovXHJcbiAgICBjb25zdHJ1Y3RvcigpIHtcclxuICAgICAgICBzdXBlcigpXHJcbiAgICAgICAgRGlyZWN0b3IuaW5zdGFuY2UgPSB0aGlzXHJcbiAgICB9XHJcbiAgICBcclxuICAgIG9uRW5hYmxlKCkge1xyXG4gICAgICAgIHRoaXMuaXNHYW1lT3ZlciA9IGZhbHNlICAgICAgICAgLy8g5ri45oiP5piv5ZCm57uT5p2fXHJcbiAgICAgICAgdGhpcy5jb3VudCA9IDFcclxuICAgICAgICB0aGlzLnNjb3JlQ291bnQgPSAwXHJcbiAgICAgICAgdGhpcy5CcmlkID0gbnVsbFxyXG4gICAgICAgIHRoaXMuUGVuY2Vsc0RhdGEgPSBbXVxyXG4gICAgICAgIHRoaXMuaXNBZGRTY29yZSA9IHRydWVcclxuICAgICAgICB0aGlzLnNjb3JlID0gMFxyXG5cclxuICAgICAgICBsZXQge2F2YXRhclVybCwgbmlja05hbWV9ID0gd3guZ2V0U3RvcmFnZVN5bmMoJ3VzZXJJbmZvJylcclxuICAgICAgICB0aGlzLm93bmVyLnVzZXJoZWFkLnNraW4gPSBhdmF0YXJVcmxcclxuICAgICAgICB0aGlzLm93bmVyLnVzZXJuYW1lLnRleHQgPSBuaWNrTmFtZVxyXG5cclxuICAgICAgICBsZXQgZGF0YVNvdXJjZSA9IFtdXHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCAyMDsgaSsrKSB7XHJcbiAgICAgICAgICAgIGRhdGFTb3VyY2UucHVzaCh7XHJcbiAgICAgICAgICAgICAgICB1c2VybmFtZTogJycgKyBpLFxyXG4gICAgICAgICAgICAgICAgc2NvcmU6IDEwMFxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLm93bmVyLnJhbmtfbGlzdC5kYXRhU291cmNlID0gZGF0YVNvdXJjZVxyXG4gICAgICAgIHRoaXMuZ2FtZUJveCA9IHRoaXMub3duZXIuZ2V0Q2hpbGRCeU5hbWUoJ2dhbWVCb3gnKVxyXG4gICAgICAgIHRoaXMuY3JlYXRlUGVuY2VsKClcclxuICAgICAgICB0aGlzLmNyZWF0ZUJyaWRzKClcclxuXHJcbiAgICAgICAgdGhpcy5vd25lci5zdGFydEdhbWVCdG4ub24oTGF5YS5FdmVudC5DTElDSywgdGhpcywgdGhpcy5zdGFydEdhbWUpXHJcblxyXG4gICAgICAgIHRoaXMub3BlbkRhdGFDb250ZXh0ID0gd3guZ2V0T3BlbkRhdGFDb250ZXh0KClcclxuICAgIH1cclxuXHJcbiAgICBzdGFydEdhbWUoKSB7XHJcbiAgICAgICAgTGF5YS5TY2VuZS5vcGVuKCdHYW1lVmlldy5zY2VuZScpXHJcbiAgICB9XHJcblxyXG4gICAgc3RvcEdhbWUoKSB7XHJcbiAgICAgICAgdGhpcy5vcGVuRGF0YUNvbnRleHQucG9zdE1lc3NhZ2UoeyB0eXBlOiAnZnJpZW5kcycsIHllYXI6IChuZXcgRGF0ZSgpKS5nZXRGdWxsWWVhcigpIH0pXHJcblxyXG4gICAgICAgIHRoaXMuaXNHYW1lT3ZlciA9IHRydWVcclxuICAgICAgICB0aGlzLm93bmVyLmdhbWVvdmVyLnZpc2libGUgPSB0cnVlXHJcblxyXG4gICAgICAgIExheWEudGltZXIub25jZSgxMDAwLCB0aGlzLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHZhciBzcHJpdGUgPSBuZXcgTGF5YS5TcHJpdGUoKTtcclxuICAgICAgICAgICAgc3ByaXRlLnpPcmRlciA9IDEwMDg7XHJcbiAgICAgICAgICAgIHNwcml0ZS5wb3MoMCwgMCk7XHJcbiAgICAgICAgICAgIHZhciB0ZXh0dXJlID0gbmV3IExheWEuVGV4dHVyZSh3aW5kb3dbJ3NoYXJlZENhbnZhcyddKTtcclxuICAgICAgICAgICAgdGV4dHVyZS5iaXRtYXAuYWx3YXlzQ2hhbmdlID0gdHJ1ZTsvL+Wwj+eoi+W6j+S9v+eUqO+8jOmdnuW4uOi0uVxyXG4gICAgICAgICAgICBzcHJpdGUuZ3JhcGhpY3MuZHJhd1RleHR1cmUodGV4dHVyZSwwLCAwLCB0ZXh0dXJlLndpZHRoLCB0ZXh0dXJlLmhlaWdodCk7XHJcbiAgICAgICAgICAgIExheWEuc3RhZ2UuYWRkQ2hpbGQoc3ByaXRlKTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBvblVwZGF0ZSgpIHtcclxuICAgICAgICBpZih0aGlzLmlzR2FtZU92ZXIpIHtcclxuICAgICAgICAgICAgcmV0dXJuXHJcbiAgICAgICAgfVxyXG4gICAgICAgIEdhbWVWaWV3Lmluc3RhbmNlLm1vdmUoKVxyXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5QZW5jZWxzRGF0YS5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICBsZXQgcGVuY2VsID0gdGhpcy5QZW5jZWxzRGF0YVtpXVxyXG4gICAgICAgICAgICBpZiAodGhpcy5CcmlkLnggPiBwZW5jZWwueCArIHBlbmNlbC53aWR0aCkge1xyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuaXNBZGRTY29yZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuaXNBZGRTY29yZSA9IGZhbHNlXHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zY29yZSsrXHJcbiAgICAgICAgICAgICAgICAgICAgR2FtZVZpZXcuaW5zdGFuY2Uuc2V0U2NvcmUodGhpcy5zY29yZSlcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBvblN0YWdlQ2xpY2soKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuQnJpZCAmJiAhdGhpcy5pc0dhbWVPdmVyKSB7XHJcbiAgICAgICAgICAgIEJyaWRzLmluc3RhbmNlLnJpZy5zZXRWZWxvY2l0eSh7IHg6IDAsIHk6IC03IH0pO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvLyBcclxuICAgIGFkZFNjb3JlKCkge1xyXG4gICAgICAgIHRoaXMuc2NvcmVDb3VudCsrXHJcbiAgICAgICAgaWYgKHRoaXMuc2NvcmVDb3VudCA9PT0gMikge1xyXG4gICAgICAgICAgICB0aGlzLlBlbmNlbHNEYXRhLnNoaWZ0KClcclxuICAgICAgICAgICAgdGhpcy5zY29yZUNvdW50ID0gMFxyXG4gICAgICAgICAgICB0aGlzLmlzQWRkU2NvcmUgPSB0cnVlXHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGNyZWF0ZVBlbmNlbCgpIHtcclxuICAgICAgICB0aGlzLmNvdW50KytcclxuICAgICAgICBpZiAodGhpcy5jb3VudCA9PT0gMikge1xyXG4gICAgICAgICAgICBsZXQgbWluID0gTGF5YS5zdGFnZS5oZWlnaHQgLyA4XHJcbiAgICAgICAgICAgIGxldCBtYXggPSBMYXlhLnN0YWdlLmhlaWdodCAvIDJcclxuICAgICAgICAgICAgbGV0IHRvcCA9IG1pbiArIE1hdGgucmFuZG9tKCkgKiAobWF4IC0gbWluKVxyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgbGV0IFBlbmNlbFVwID0gTGF5YS5Qb29sLmdldEl0ZW1CeUNyZWF0ZUZ1bignUGVuY2VsVXAnLCB0aGlzLlBlbmNlbFVwLmNyZWF0ZSwgdGhpcy5QZW5jZWxVcClcclxuICAgICAgICAgICAgUGVuY2VsVXAucG9zKExheWEuc3RhZ2Uud2lkdGgsIHRvcCAtIFBlbmNlbFVwLmhlaWdodClcclxuICAgICAgICAgICAgdGhpcy5nYW1lQm94LmFkZENoaWxkKFBlbmNlbFVwKVxyXG4gICAgXHJcbiAgICAgICAgICAgIGxldCBQZW5jZWxEd29uID0gTGF5YS5Qb29sLmdldEl0ZW1CeUNyZWF0ZUZ1bignUGVuY2VsRHdvbicsIHRoaXMuUGVuY2VsRHdvbi5jcmVhdGUsIHRoaXMuUGVuY2VsRHdvbilcclxuICAgICAgICAgICAgUGVuY2VsRHdvbi5wb3MoTGF5YS5zdGFnZS53aWR0aCwgdG9wICsgKExheWEuc3RhZ2UuaGVpZ2h0IC8gNSkpXHJcbiAgICAgICAgICAgIHRoaXMuZ2FtZUJveC5hZGRDaGlsZChQZW5jZWxEd29uKVxyXG5cclxuICAgICAgICAgICAgdGhpcy5QZW5jZWxzRGF0YS5wdXNoKFBlbmNlbFVwKVxyXG4gICAgXHJcbiAgICAgICAgICAgIHRoaXMuY291bnQgPSAwXHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgXHJcbiAgICBjcmVhdGVCcmlkcygpIHtcclxuICAgICAgICB0aGlzLkJyaWQgPSBMYXlhLlBvb2wuZ2V0SXRlbUJ5Q3JlYXRlRnVuKCdCcmlkcycsIHRoaXMuQnJpZHMuY3JlYXRlLCB0aGlzLkJyaWRzKVxyXG4gICAgICAgIHRoaXMuQnJpZC5wb3MoNTAsIExheWEuc3RhZ2UuaGVpZ2h0LzIgKVxyXG4gICAgICAgIHRoaXMuZ2FtZUJveC5hZGRDaGlsZCh0aGlzLkJyaWQpXHJcbiAgICB9XHJcblxyXG59IiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgR2FtZVZpZXcgZXh0ZW5kcyBMYXlhLlNjZW5le1xyXG4gICAgY29uc3RydWN0b3IoKXtcclxuICAgICAgICBzdXBlcigpXHJcbiAgICAgICAgR2FtZVZpZXcuaW5zdGFuY2UgPSB0aGlzXHJcbiAgICB9XHJcblxyXG4gICAgb25FbmFibGUoKSB7XHJcbiAgICAgICAgdGhpcy5zcGVlZCA9IDRcclxuICAgIH1cclxuXHJcbiAgICBzZXRTY29yZShudW0gPSAwKSB7XHJcbiAgICAgICAgdGhpcy5zY29yZS50ZXh0ID0gbnVtXHJcbiAgICB9XHJcblxyXG4gICAgbW92ZSgpIHtcclxuICAgICAgICBpZiAoLXRoaXMuYmFja2dyb3VuZC54ID49IDE2NzQpIHtcclxuICAgICAgICAgICAgdGhpcy5iYWNrZ3JvdW5kLnggPSAwXHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuYmFja2dyb3VuZC54IC09IHRoaXMuc3BlZWRcclxuICAgIH1cclxufSIsImltcG9ydCBEaXJlY3RvciBmcm9tICcuL0RpcmVjdG9yJ1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUGVuY2VsIGV4dGVuZHMgTGF5YS5TY3JpcHR7XHJcbiAgICBjb25zdHJ1Y3RvcigpIHtcclxuICAgICAgICBzdXBlcigpXHJcbiAgICB9XHJcblxyXG4gICAgb25FbmFibGUoKSB7XHJcbiAgICAgICAgLy/orr7nva7liJ3lp4vpgJ/luqZcclxuICAgICAgICB0aGlzLnJpZyA9IHRoaXMub3duZXIuZ2V0Q29tcG9uZW50KExheWEuUmlnaWRCb2R5KTtcclxuICAgICAgICB0aGlzLnJpZy5zZXRWZWxvY2l0eSh7IHg6IC00LCB5OiAwIH0pO1xyXG4gICAgICAgIHRoaXMuaXNDcmVhdGUgPSBmYWxzZVxyXG4gICAgfVxyXG5cclxuICAgIG9uVXBkYXRlKCkge1xyXG4gICAgICAgIC8vIOWmguaenOa4uOaIj+e7k+adn+WBnOatoui/kOWKqFxyXG4gICAgICAgIGlmIChEaXJlY3Rvci5pbnN0YW5jZS5pc0dhbWVPdmVyKSB7XHJcbiAgICAgICAgICAgIHRoaXMucmlnLnNldFZlbG9jaXR5KHsgeDogMCwgeTogMCB9KTtcclxuICAgICAgICAgICAgcmV0dXJuXHJcbiAgICAgICAgfVxyXG4gICAgICAgIGxldCBvd25lciA9IHRoaXMub3duZXJcclxuICAgICAgICBpZiAob3duZXIueCA8PSAtb3duZXIud2lkdGgpIHtcclxuICAgICAgICAgICAgb3duZXIucmVtb3ZlU2VsZigpXHJcbiAgICAgICAgICAgIERpcmVjdG9yLmluc3RhbmNlLmFkZFNjb3JlKClcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKG93bmVyLnggPD0gTWF0aC5mbG9vcihMYXlhLnN0YWdlLndpZHRoLzIpKSB7XHJcbiAgICAgICAgICAgIGlmKCF0aGlzLmlzQ3JlYXRlKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmlzQ3JlYXRlID0gdHJ1ZVxyXG4gICAgICAgICAgICAgICAgRGlyZWN0b3IuaW5zdGFuY2UuY3JlYXRlUGVuY2VsKClcclxuICAgICAgICAgICAgfSAgIFxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbn0iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBHYW1lU3RhcnQgZXh0ZW5kcyBMYXlhLlNjZW5le1xyXG4gICAgY29uc3RydWN0b3IoKSB7XHJcbiAgICAgICAgc3VwZXIoKVxyXG4gICAgICAgIEdhbWVTdGFydC5pbnN0YW5jZSA9IHRoaXNcclxuICAgICAgICB0aGlzLmxvYWRTY2VuZSgnR2FtZVZpZXcuc2NlbmUnKVxyXG4gICAgfVxyXG5cclxuICAgIG9uRW5hYmxlKCkge1xyXG4gICAgICAgIHRoaXMub24oTGF5YS5FdmVudC5DTElDSywgdGhpcywgdGhpcy5vblBhZ2VDbGljaylcclxuXHJcbiAgICAgICAgY29uc3QgYnV0dG9uID0gd3guY3JlYXRlVXNlckluZm9CdXR0b24oe1xyXG4gICAgICAgICAgICB0eXBlOiAndGV4dCcsXHJcbiAgICAgICAgICAgIHRleHQ6ICcnLFxyXG4gICAgICAgICAgICBzdHlsZToge1xyXG4gICAgICAgICAgICAgICAgbGVmdDogMTAwLFxyXG4gICAgICAgICAgICAgICAgdG9wOiAyNjAsXHJcbiAgICAgICAgICAgICAgICB3aWR0aDogMjAwLFxyXG4gICAgICAgICAgICAgICAgaGVpZ2h0OiA1MCxcclxuICAgICAgICAgICAgICAgIGJhY2tncm91bmRDb2xvcjogJ3JnYmEoMCwwLDAsMCknLFxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9KVxyXG4gICAgICAgICAgYnV0dG9uLm9uVGFwKCh1c2VyaW5mbykgPT4ge1xyXG4gICAgICAgICAgICAgIGlmICh3eC5nZXRTdG9yYWdlU3luYygndXNlckluZm8nKSkge1xyXG4gICAgICAgICAgICAgICAgTGF5YS5TY2VuZS5vcGVuKCdHYW1lVmlldy5zY2VuZScpXHJcbiAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHd4LmxvZ2luKHtcclxuICAgICAgICAgICAgICAgICAgICBzdWNjZXNzKHJlcykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAocmVzLmNvZGUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIOWPkei1t+e9kee7nOivt+axglxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgd3gucmVxdWVzdCh7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdXJsOiAnaHR0cDovL3d4LnlpbmNodW55dS5jb20veGN4L2xvZ2luJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXRob2Q6ICdQT1NUJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvZGU6IHJlcy5jb2RlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBqc29uRGF0YTogSlNPTi5zdHJpbmdpZnkodXNlcmluZm8pXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdWNjZXNzKGRhdGEpe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyDlrZjlgqjliLDmnKzlnLBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd3guc2V0U3RvcmFnZVN5bmMoJ3VzZXJJbmZvJywgZGF0YS5kYXRhLlJlc3VsdClcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgTGF5YS5TY2VuZS5vcGVuKCdHYW1lVmlldy5zY2VuZScpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ+eZu+W9leWksei0pe+8gScgKyByZXMuZXJyTXNnKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICB9KVxyXG5cclxuICAgIH1cclxuXHJcbiAgICBvblBhZ2VDbGljaygpIHtcclxuICAgICAgICBcclxuICAgIH1cclxufSJdfQ==
